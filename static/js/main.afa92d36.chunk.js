(this["webpackJsonpgoals-web-ui"]=this["webpackJsonpgoals-web-ui"]||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),r=n(34),c=n.n(r),s=(n(45),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))}),o=n(32),u=n(6),l=n(10),d=n(12),f=n(11),h=n.n(f),b=n(9),j=n.n(b),v=n(24),g=n(23),p=n(36),O=n(37),m=(n(46),n(22)),y=n(35),k="/goals-webiste",x={running:{type:"running",label:"Running",Icon:m.b},trekking:{type:"trekking",label:"Trekking",Icon:m.a},climbing:{type:"climbing",label:"Climbing",Icon:g.a},fitness:{type:"fitness",label:"Fitness",Icon:y.a}};var w={date:{toApiValue:function(e){return h()(e).toISOString()},toCsvValue:j.a.identity,fromCsvValue:j.a.identity},string:{toApiValue:j.a.identity,toCsvValue:function(e){return e.replaceAll(",","%%COMMA%%").replaceAll("\n","%%NEW_LINE%%")},fromCsvValue:function(e){return e.replaceAll("%%COMMA%%",",").replaceAll("%%NEW_LINE%%","\n")}},number:{toApiValue:j.a.toNumber,toCsvValue:j.a.identity,fromCsvValue:j.a.toNumber},duration:{toApiValue:function(e){return h.a.duration(e).as("seconds")},toCsvValue:j.a.identity,fromCsvValue:j.a.toNumber}},S={date:{label:"Date",inputPlaceholder:"YYYY-MM-DD",createInitValue:function(){return h()().format("YYYY-MM-DD")},type:w.date},description:{label:"Description",inputPlaceholder:"describe the place or type of activity",createInitValue:function(){return""},type:w.string},duration:{label:"Duration",inputPlaceholder:"HH:mm:ss",createInitValue:function(){return""},type:w.duration},distance:{label:"Distance",inputPlaceholder:"18000",createInitValue:function(){return""},type:w.number},elevationGain:{label:"Elevation gain",inputPlaceholder:"500",createInitValue:function(){return""},type:w.number},kmPerHour:{label:"Km/h",inputPlaceholder:"Km per hour",createInitValue:function(){return""},type:w.number},minPerKm:{label:"min/Km",inputPlaceholder:"minutes per Km",createInitValue:function(){return""},type:w.number},id:{label:"Identify",inputPlaceholder:"Input an UUID",createInitValue:function(){return""},type:w.string},type:{label:"Session type",inputPlaceholder:j.a.keys(x).join("/"),createInitValue:function(){return""},type:w.string}},I=n(1),N={running:function(e){var t=e.duration,n=e.distance,a=e.kmPerHour,i=e.minPerKm;return[{Icon:v.a,value:h.a.duration(t,"s").format("h:mm:ss")},{Icon:g.b,value:"".concat(j.a.round(n/1e3,1)," Km")},{Icon:p.a,value:"".concat(i," min/Km")},{Icon:O.a,value:"".concat(a," Km/h")}]},fitness:function(e){var t=e.duration;return[{Icon:v.a,value:h.a.duration(t,"s").format("h:mm:ss")}]},climbing:function(e){var t=e.duration;return[{Icon:v.a,value:h.a.duration(t,"s").format("h:mm:ss")}]},trekking:function(e){var t=e.duration,n=e.distance,a=e.elevationGain;return[{Icon:m.a,value:"".concat(a," m")},{Icon:v.a,value:h.a.duration(t,"s").format("h:mm")},{Icon:g.b,value:"".concat(j.a.round(n/1e3,1)," Km")}]}};function D(e){var t=e.label,n=e.description,a=e.type,i=e.distance,r=e.date,c=e.duration,s=e.elevationGain,o=e.kmPerHour,u=e.minPerKm,l=h()(r,"YYYY-MM-DDTHH:mm.Z").format("ll"),d=x[a].Icon,f=N[a]({duration:c,distance:i,elevationGain:s,kmPerHour:o,minPerKm:u});return Object(I.jsxs)("li",{className:"goals-news-item",children:[Object(I.jsxs)("div",{className:"goals-news-item__header",children:[Object(I.jsxs)("div",{className:"goals-news-item__header-type",children:[Object(I.jsx)(d,{}),Object(I.jsx)("p",{className:"goals-news-item__header-label",children:t})]}),Object(I.jsxs)("div",{className:"goals-news-item__header-content",children:[Object(I.jsx)("p",{className:"goals-news-item__header-description",children:n}),Object(I.jsx)("p",{className:"goals-news-item__header-date",children:l})]})]}),Object(I.jsx)("ol",{className:"goals-news-item__content",children:f.map((function(e,t){var n=e.Icon,a=e.value;return Object(I.jsxs)("li",{className:"goals-news-item__content-item",children:[Object(I.jsx)(n,{}),Object(I.jsx)("p",{className:"goals-news-item__header-label",children:a})]},t)}))})]})}var C=n(8),E=n.n(C),_=n(3),A=n(4),P=n(5),V=n(7),R=function(){function e(){Object(_.a)(this,e)}return Object(V.a)(e,[{key:"save",value:function(){}},{key:"dispose",value:function(){}},{key:"create",value:function(e){}},{key:"update",value:function(e){}},{key:"getById",value:function(e){}}]),e}(),Y=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(R),G=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(R),T=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(R),M=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(R),H=function(){function e(){Object(_.a)(this,e)}return Object(V.a)(e,[{key:"getAllByYear",value:function(e){return[]}}]),e}(),K=n(16),B=n(13),U=n(59),F=n(40);function J(){return Object(U.a)()}var L=function(){function e(t){Object(_.a)(this,e),this.type=t}return Object(V.a)(e,[{key:"validate",value:function(e,t){return E.a.replace(t,"{{type}}",this.type)}}]),e}(),W=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.call(this,"id")}return Object(V.a)(n,[{key:"validate",value:function(e,t){if(!function(e){return Object(F.a)(e)}(e))return Object(K.a)(Object(B.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(L),Z=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.call(this,"date")}return Object(V.a)(n,[{key:"validate",value:function(e,t){if(!E.a.isString(e)||!/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/.test(e))return Object(K.a)(Object(B.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(L),q=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.call(this,"number")}return Object(V.a)(n,[{key:"validate",value:function(e,t){if(!E.a.isNumber(e))return Object(K.a)(Object(B.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(L),z=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.call(this,"duration")}return Object(V.a)(n,[{key:"validate",value:function(e,t){if(!E.a.isNumber(e))return Object(K.a)(Object(B.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(L),Q=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){return Object(_.a)(this,n),t.call(this,"string")}return Object(V.a)(n,[{key:"validate",value:function(e,t){if(!E.a.isString(e))return Object(K.a)(Object(B.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(L),X=[new W,new Z,new q,new z,new Q];function $(e){return X.find((function(t){return t.type===e}))}var ee=n(29),te=function(){function e(t,n){Object(_.a)(this,e),this.code=t,this.payload=n}return Object(V.a)(e,[{key:"isOk",value:function(){return this.code<300&&this.code>=200}}],[{key:"createByError",value:function(t){return t.commandResponse?t.commandResponse:new e(500,t.message||JSON.stringify(t))}},{key:"createOk",value:function(t){return new e(200,t)}}]),e}();te.UNDEFINED_HANDLER=new te(500,"undefined command handler"),te.UNDEFINED_REPOSITORY=new te(500,"undefined aggregate repository"),te.OK=new te(200);var ne=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(e,a){var i;return Object(_.a)(this,n),(i=t.call(this,a)).name="CommandResponseError",i.code=e,i.commandResponse=new te(e,a),i}return n}(Object(ee.a)(Error)),ae=function(){function e(){Object(_.a)(this,e),this.meta={}}return Object(V.a)(e,[{key:"init",value:function(e,t,n){this.meta[e]={type:$(t),defaultValue:n},this[e]="function"===typeof n?n():n}},{key:"validate",value:function(){var e=this;E.a.forEach(this.meta,(function(t,n){var a=e[n],i=t.type;if(!E.a.isNil(a)){var r=i.validate(a,"".concat(n," is not a {{type}}"));if(r)throw new ne(400,r)}}))}}]),e}(),ie=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e}return n}(ae),re=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e}return n}(ae),ce=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e.init("distance","number",0),e}return n}(ae),se=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e.init("distance","number",0),e.init("elevationGain","number",0),e}return n}(ae),oe=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("year","number"),e}return n}(ae),ue=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e}return n}(ae),le=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e}return n}(ae),de=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e.init("distance","number"),e}return n}(ae),fe=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e.init("distance","number"),e.init("elevationGain","number"),e}return n}(ae),he=function(){function e(){Object(_.a)(this,e),this.map={}}return Object(V.a)(e,[{key:"registerRepository",value:function(e,t){this.map[e]=this.map[e]?Object(l.a)(Object(l.a)({},this.map[e]),{},{instance:t}):{instance:t}}},{key:"create",value:function(e){var t=this.map[e].instance;return t||te.UNDEFINED_REPOSITORY}}]),e}(),be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,a=t.date,i=t.description,r=t.duration;Object(_.a)(this,e),this.id=n||J(),this.setDate(a),this.setDescription(i),this.setDuration(r)}return Object(V.a)(e,[{key:"setDescription",value:function(e){this.description=e}},{key:"setDate",value:function(e){this.date=e}},{key:"setDuration",value:function(e){this.duration=e}}]),e}(),je=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_.a)(this,n),t.call(this,e)}return n}(be);function ve(e){return e/60}function ge(e){return e/3600}function pe(e){return e/1e3}var Oe=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(e,a){var i;return Object(_.a)(this,n),(i=t.call(this,"".concat(e," error: ").concat(a))).name="RequestError",i}return n}(Object(ee.a)(Error)),me=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.id,r=a.date,c=a.description,s=a.distance,o=a.duration;return Object(_.a)(this,n),(e=t.call(this,{id:i,date:r,description:c,duration:o})).setRunData({distance:s,duration:o}),e}return Object(V.a)(n,[{key:"speed",value:function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"km/h";return"min/km"===n?ve(e)/pe(t):"km/h"===n?pe(t)/ge(e):void 0}(this.duration,this.distance,e);if(t)return t;throw new Oe("run session speed","type ".concat(e," undefined"))}},{key:"setRunData",value:function(e){var t=e.distance,n=e.duration;this.distance=t,this.duration=n,this.kmPerHour=E.a.round(this.speed("km/h"),2),this.minPerKm=E.a.round(this.speed("min/km"),2)}}]),n}(be),ye=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_.a)(this,n),t.call(this,e)}return n}(me),ke=n(39),xe=["elevationGain"],we=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.elevationGain,r=Object(ke.a)(a,xe);return Object(_.a)(this,n),(e=t.call(this,r)).setElevationGain(i),e}return Object(V.a)(n,[{key:"setElevationGain",value:function(e){this.elevationGain=e}}]),n}(me),Se=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_.a)(this,n),t.call(this,e)}return n}(be),Ie=n(15),Ne=(n(48),function(){function e(t,n){Object(_.a)(this,e),this.repository=t,this.readonly=n}return Object(V.a)(e,[{key:"save",value:function(){!this.readonly&&this.repository.save()}},{key:"dispose",value:function(){!this.readonly&&this.repository.dispose()}},{key:"create",value:function(e){!this.readonly&&this.repository.create(e)}},{key:"update",value:function(e){!this.readonly&&this.repository.update(e)}},{key:"delete",value:function(e){!this.readonly&&this.repository.delete(e)}},{key:"getById",value:function(e){this.repository.getById(e)}}]),e}()),De=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;Object(_.a)(this,e),this.repository=t,this.hooks=n,this.settings=a}return Object(V.a)(e,[{key:"createContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.correlationId;return{correlationId:t||J(),transaction:new Ne(this.repository,this.settings.readonly)}}},{key:"validate",value:function(e,t){e.validate()}},{key:"beforeExecution",value:function(e,t){}},{key:"apply",value:function(e,t){}},{key:"save",value:function(e,t){t.transaction.save()}},{key:"execute",value:function(e,t){var n=this.createContext(t);try{this.beforeExecution(e,n),this.hooks.beforeExecution&&this.hooks.beforeExecution(e,n),this.validate(e,n),this.hooks.validate&&this.hooks.validate(e,n);var a=this.hooks.apply?this.hooks.apply(e,n):this.apply(e,n);return this.hooks.beforeSave&&this.hooks.beforeSave(e,n),this.save(e,n),te.createOk(a)}catch(i){return n.transaction.dispose(),te.createByError(i)}}}]),e}(),Ce=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{createNew:!1,getId:E.a.property("id"),create:E.a.noop,createRepo:E.a.noop},i=arguments.length>1?arguments[1]:void 0;return Object(_.a)(this,n),(e=t.call(this,a.createRepo(),i)).settings=a,e}return Object(V.a)(n,[{key:"beforeExecution",value:function(e,t){if(Object(K.a)(Object(B.a)(n.prototype),"beforeExecution",this).call(this,e,t),this.settings.createNew)t.aggregate=this.settings.create(e);else{var a=this.settings.getId(e),i=this.repository.getById(a);t.aggregate=this.settings.create(i)}}},{key:"validate",value:function(e,t){if(Object(K.a)(Object(B.a)(n.prototype),"validate",this).call(this,e,t),!t.aggregate)throw new ne(404,"entity not found")}},{key:"save",value:function(e,t){this.settings.createNew?t.transaction.create(t.aggregate):this.settings.delete?t.transaction.delete(t.aggregate):t.transaction.update(t.aggregate),Object(K.a)(Object(B.a)(n.prototype),"save",this).call(this,e,t)}},{key:"apply",value:function(e,t){return t.aggregate}}]),n}(De),Ee=function(){function e(t){Object(_.a)(this,e),this.commandHandler=t,this.createService=function(e){return new De(e.serviceSettings.createRepo(),e.hooks,e.serviceSettings)}}return Object(V.a)(e,[{key:"toCreateAggregate",value:function(){return this.serviceSettings={createNew:!0},this.createService=function(e){return new Ce(e.serviceSettings,e.hooks)},this}},{key:"toDeleteAggregate",value:function(){return this.serviceSettings={delete:!0,getId:function(e){return e.id}},this.createService=function(e){return new Ce(e.serviceSettings,e.hooks)},this}},{key:"toUpdateAggregate",value:function(){return this.serviceSettings={createNew:!1,getId:function(e){return e.id}},this.createService=function(e){return new Ce(e.serviceSettings,e.hooks)},this}},{key:"readonly",value:function(){return this.serviceSettings=Object(l.a)(Object(l.a)({},this.serviceSettings),{},{readonly:!0}),this}},{key:"forCommand",value:function(e){return this.commandHandler.registerCommand(e,this),this}},{key:"entity",value:function(e){return this.serviceSettings=E.a.merge(this.serviceSettings,{create:e}),this}},{key:"identify",value:function(e){return this.serviceSettings=E.a.merge(this.serviceSettings,{getId:e}),this}},{key:"repository",value:function(e){var t=this;return this.serviceSettings=E.a.merge(this.serviceSettings,{createRepo:function(){return t.commandHandler.repositoryMap.create(e)}}),this}},{key:"apply",value:function(e){return this.hooks=E.a.merge(this.hooks,{apply:e}),this}}]),e}(),_e=function(){function e(t){Object(_.a)(this,e),this.handlers={},this.repositoryMap=t}return Object(V.a)(e,[{key:"registerCommand",value:function(e,t){e.executor=this,this.handlers[e]=this.handlers[e]?Object(l.a)(Object(l.a)({},this.handlers[e]),{},{ServiceClass:t}):{ServiceClass:t}}},{key:"execute",value:function(e){var t=this.handlers[Object.getPrototypeOf(e).constructor].ServiceClass;return t.constructor===Ee?t.createService(t).execute(e):t?new t({repositoryMap:this.repositoryMap}).execute(e):te.UNDEFINED_HANDLER}},{key:"createService",value:function(){return new Ee(this)}}]),e}(),Ae=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ae),Pe=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ae),Ve=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ae),Re=function(e){Object(A.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ae),Ye=new he,Ge=new _e(Ye);function Te(e){e.createService().toCreateAggregate().forCommand(re).entity((function(e){return new je(e)})).repository(G),e.createService().toDeleteAggregate().forCommand(Ae).repository(G),e.createService().toUpdateAggregate().forCommand(le).entity((function(e){return new je(e)})).repository(G).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),e.duration&&t.aggregate.setDuration(e.duration),t.aggregate}))}function Me(e){e.createService().toCreateAggregate().forCommand(se).entity((function(e){return new we(e)})).repository(M),e.createService().toDeleteAggregate().forCommand(Ve).repository(M),e.createService().toUpdateAggregate().forCommand(fe).entity((function(e){return new we(e)})).repository(M).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),e.elevationGain&&t.aggregate.setElevationGain(e.elevationGain),(e.distance||e.duration)&&t.aggregate.setRunData(E.a.merge({distance:t.aggregate.distance,duration:t.aggregate.duration},{distance:e.distance,duration:e.duration})),t.aggregate}))}function He(e){e.createService().toCreateAggregate().forCommand(ce).entity((function(e){return new ye(e)})).repository(T),e.createService().toDeleteAggregate().forCommand(Pe).repository(T),e.createService().toUpdateAggregate().forCommand(de).entity((function(e){return new ye(e)})).repository(T).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),(e.distance||e.duration)&&t.aggregate.setRunData(E.a.merge({distance:t.aggregate.distance,duration:t.aggregate.duration},{distance:e.distance,duration:e.duration})),t.aggregate}))}function Ke(e){e.createService().toCreateAggregate().forCommand(ie).entity((function(e){return new Se(e)})).repository(Y),e.createService().toDeleteAggregate().forCommand(Re).repository(Y),e.createService().toUpdateAggregate().forCommand(ue).entity((function(e){return new Se(e)})).repository(Y).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),e.duration&&t.aggregate.setDuration(e.duration),t.aggregate}))}function Be(e,t,n){return new Promise((function(a,i){if("POST"===t){if("/api/running/session"===e){var r=new ce;return void a(Ge.execute(E.a.merge(r,n)))}if("/api/fitness/session"===e){var c=new re;return void a(Ge.execute(E.a.merge(c,n)))}if("/api/climbing/session"===e){var s=new ie;return void a(Ge.execute(E.a.merge(s,n)))}if("/api/trekking/session"===e){var o=new se;return void a(Ge.execute(E.a.merge(o,n)))}}if("PUT"===t){if("/api/running/session"===e){var u=new de;return void a(Ge.execute(E.a.merge(u,n)))}if("/api/fitness/session"===e){var l=new le;return void a(Ge.execute(E.a.merge(l,n)))}if("/api/climbing/session"===e){var d=new ue;return void a(Ge.execute(E.a.merge(d,n)))}if("/api/trekking/session"===e){var f=new fe;return void a(Ge.execute(E.a.merge(f,n)))}}if("GET"===t&&e.startsWith("/api/sessions/year/")){var h=new oe;return h.year=E.a.toNumber(e.substring("/api/sessions/year/".length)),void a(Ge.execute(h))}i(new Error("not implemented"))}))}var Ue={fitness:G,running:T,trekking:M,climbing:Y,sessions:H},Fe=function(e,t){return Ye.registerRepository(e,t)},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;e.createService().readonly().forCommand(oe).repository(H).apply((function(e,t){return t.transaction.repository.getAllByYear(e.year)})),He(e),Me(e),Te(e),Ke(e)},Le=function(){return{api:Be}};n(49);function We(){var e=Le().api,t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){e("/api/sessions/year/"+h()().year(),"GET").then((function(e){return r(e.payload)}))}),[e]),Object(I.jsx)("ol",{className:"goals-news",children:i.map((function(e,t){return Object(I.jsx)(D,Object(l.a)({},e),t)}))})}var Ze=n(26),qe=n(38);n(50);function ze(e){var t=e.children,n=Object(a.useState)(!1),i=Object(d.a)(n,2),r=i[0],c=i[1];return Object(I.jsxs)("div",{className:"goals-menu",children:[Object(I.jsx)(Ze.b,{onClick:function(){return c((function(e){return!e}))}}),r&&Object(I.jsx)("div",{className:"goals-menu__list",children:t})]})}n(51);function Qe(e){var t=e.Icon,n=e.text,a=e.url;return Object(I.jsxs)("div",{className:"goals-toolbar-link",children:[Object(I.jsx)(t,{title:n}),Object(I.jsx)("a",{href:a,children:n})]})}n(52);function Xe(){return Object(I.jsx)(I.Fragment,{children:j.a.map(x,(function(e,t){return Object(I.jsx)(Qe,{Icon:e.Icon,url:k+"/".concat(t),text:e.label},t)}))})}function $e(){return Object(I.jsxs)("div",{className:"goals-toolbar",children:[Object(I.jsx)("div",{className:"goals-toolbar__logo",children:Object(I.jsx)(Ze.a,{})}),Object(I.jsx)("div",{className:"goals-toolbar__links",children:Object(I.jsx)(Xe,{})}),Object(I.jsx)("div",{className:"goals-toolbar__menu",children:Object(I.jsxs)(ze,{children:[Object(I.jsx)("div",{className:"goals-toolbar__menu-links",children:Object(I.jsx)(Xe,{})}),Object(I.jsx)("br",{}),Object(I.jsx)(Qe,{Icon:qe.a,url:k+"/settings",text:"Settings"})]})})]})}var et=function(){return Object(I.jsxs)("div",{className:"goals-page goals-page--home",children:[Object(I.jsx)($e,{}),Object(I.jsx)(We,{})]})},tt=n(20),nt=n.n(tt),at=n(27),it=n(19);function rt(e){var t=e.id,n=e.label,a=e.placeholder,i=e.value,r=e.onChange;return Object(I.jsxs)("div",{className:"form-item",children:[Object(I.jsx)("label",{htmlFor:t,children:n}),Object(I.jsx)("input",{placeholder:a,id:t,value:i,onChange:r})]})}n(54);function ct(e){var t=e.type,n=x[t].Icon;return Object(I.jsxs)("div",{className:"goals-tracking",children:[Object(I.jsx)(n,{}),Object(I.jsx)("button",{children:"Start Tracking"})]})}function st(e){var t=e.type,n=e.props,i=Object(u.f)(),r=Object(a.useState)(),c=Object(d.a)(r,2),s=c[0],o=c[1],f=Object(a.useState)(j.a.reduce(n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(it.a)({},t,S[t].createInitValue()))}),{})),h=Object(d.a)(f,2),b=h[0],v=h[1],g=Le().api,p=function(){var e=Object(at.a)(nt.a.mark((function e(a){var r,c;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r=j.a.reduce(n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(it.a)({},t,S[t].type.toApiValue(b[t])))}),{}),e.next=4,g("/api/"+t+"/session","POST",r);case 4:(c=e.sent).code>=200&&c.code<300?i(k+"/"):o({status:!1,message:c.payload});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=void 0;if(s){var t=setTimeout((function(){return o(void 0)}),5e3);e=function(){return clearTimeout(t)}}return e}),[s]),Object(I.jsxs)("form",{className:"goals-create-new-session",onSubmit:p,children:[n.map((function(e){var t=S[e],n=t.label,a=t.inputPlaceholder;return Object(I.jsx)(rt,{id:e,label:n,value:b[e],onChange:function(t){return v((function(n){return Object(l.a)(Object(l.a)({},n),{},Object(it.a)({},e,t.target.value))}))},placeholder:a},e)})),Object(I.jsx)("div",{className:"form-footer",children:Object(I.jsx)("input",{type:"submit",value:"Conferma"})}),s&&s.status&&Object(I.jsx)("div",{children:"Created!"}),s&&!s.status&&Object(I.jsx)("div",{children:s.message})]})}function ot(e){var t=e.type,n=e.props;return Object(I.jsxs)("div",{className:"goals-page goals-page--new-session",children:[Object(I.jsx)(ct,{type:t}),Object(I.jsx)(st,{type:t,props:n})]})}function ut(){return Object(I.jsx)(ot,{type:"running",props:["date","description","duration","distance"]})}var lt=function(){function e(t){Object(_.a)(this,e),this.name=t,this.cache=[]}return Object(V.a)(e,[{key:"getData",value:function(){var e=localStorage.getItem(this.name);return e?JSON.parse(e):[]}},{key:"save",value:function(){if(0!==this.cache.length){var e=this.getData(),t=this.cache.map((function(e){return e.id}));e=[].concat(Object(Ie.a)(e.filter((function(e){return!t.includes(e.id)}))),Object(Ie.a)(this.cache)),localStorage.setItem(this.name,JSON.stringify(e))}}},{key:"dispose",value:function(){this.cache=[]}},{key:"create",value:function(e){this.cache.push(e)}},{key:"update",value:function(e){this.cache.find((function(t){return t.id===e.id}))&&(this.cache=this.cache.filter((function(t){return t.id!==e.id}))),this.cache.push(e)}},{key:"getById",value:function(e){var t=this.cache.find((function(t){return t.id===e}));return t||((t=this.getData().find((function(t){return t.id===e})))&&this.cache.push(t),t)}}]),e}(),dt=function(){function e(){Object(_.a)(this,e),this.names=[]}return Object(V.a)(e,[{key:"registerSession",value:function(e){this.names.push(e)}},{key:"getAllByYear",value:function(e){var t=[];return this.names.forEach((function(n){var a=new lt(n).getData().filter((function(t){return h()(t.date).year()===e})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{type:n})}));t=[].concat(Object(Ie.a)(t),Object(Ie.a)(a))})),j.a.reverse(j.a.sortBy(t,["date"]))}}]),e}();function ft(){return Object(I.jsx)(ot,{type:"trekking",props:["date","description","elevationGain","duration","distance"]})}function ht(){return Object(I.jsx)(ot,{type:"climbing",props:["date","description","duration"]})}function bt(){return Object(I.jsx)(ot,{type:"fitness",props:["date","description","duration"]})}var jt=n(28),vt=(n(55),["type","date","description","distance","duration","elevationGain","id"]);function gt(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Le().api,c=Object(a.useRef)();return Object(a.useEffect)((function(){n.content&&(c.current.click(),i({}))}),[n.content]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("button",{onClick:function(){r("/api/sessions/year/"+h()().year(),"GET").then((function(e){var t=e.payload;if(0!==t.length){var n="data:text/csv;charset=utf-8,"+(vt.join(",")+"\n")+t.map((function(e){return vt.map((function(t){return S[t].type.toCsvValue(e[t])})).join(",")})).join("\n"),a="goals-sessions- "+h()().format("YYYY-MM-DD")+".csv";i({content:n,fileName:a})}}))},children:"Export Data"}),Object(I.jsx)("a",{ref:c,className:"goals-export-csv",href:n.content,download:n.fileName,children:"Donwload Sessions"})]})}function pt(e){var t=e.split("\n"),n=t.shift().split(",");return t.map((function(e){for(var t={},a=e.split(","),i=0;i<n.length;i++)t[n[i]]=S[n[i]].type.fromCsvValue(a[i]);return t}))}function Ot(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(""),c=Object(d.a)(r,2),s=c[0],o=c[1],u=Object(a.useState)([]),l=Object(d.a)(u,2),f=l[0],h=l[1],b=Le().api,j=function(){var e=Object(at.a)(nt.a.mark((function e(){var t,a,r,c;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=28;break}t=pt(s),a=Object(jt.a)(t),e.prev=3,a.s();case 5:if((r=a.n()).done){e.next=17;break}return c=r.value,e.prev=7,e.next=10,b("/api/"+c.type+"/session",c.id?"PUT":"POST",c);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),h((function(t){return[].concat(Object(Ie.a)(t),[e.t0])}));case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(3),a.e(e.t1);case 22:return e.prev=22,a.f(),e.finish(22);case 25:i(!0),e.next=30;break;case 28:i(!1),h([]);case 30:case"end":return e.stop()}}),e,null,[[3,19,22,25],[7,12]])})));return function(){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{className:"goals-settings__import",children:[Object(I.jsxs)("div",{className:"goals-settings__import-header",children:[Object(I.jsx)("button",{onClick:j,children:n?"Import Data":"Confirm Import"}),!n&&Object(I.jsx)("button",{onClick:function(){i(!0),h([])},children:"Cancel Import"})]}),!n&&Object(I.jsx)("textarea",{value:s,onChange:function(e){return o(e.target.value)},placeholder:"write CSV data here"}),f.length>0&&Object(I.jsx)("div",{className:"goals-settings__import-erros",children:f.map((function(e,t){return Object(I.jsx)("p",{children:JSON.stringify(e)},t)}))})]})}var mt=function(){return Object(I.jsxs)("div",{className:"goals-page goals-page--settings",children:[Object(I.jsx)(Ot,{}),Object(I.jsx)(gt,{})]})},yt=n(11);n(56)(yt),function(){Je();var e=new dt;j.a.forEach(Ue,(function(t,n){"sessions"===n?Fe(t,e):(e.registerSession(n),Fe(t,new lt(n)))}))}(),c.a.render(Object(I.jsx)(i.a.StrictMode,{children:Object(I.jsx)(o.a,{basename:k,children:Object(I.jsxs)(u.c,{children:[Object(I.jsx)(u.a,{path:"/",element:Object(I.jsx)(et,{})}),Object(I.jsx)(u.a,{path:"/running",element:Object(I.jsx)(ut,{})}),Object(I.jsx)(u.a,{path:"/trekking",element:Object(I.jsx)(ft,{})}),Object(I.jsx)(u.a,{path:"/climbing",element:Object(I.jsx)(ht,{})}),Object(I.jsx)(u.a,{path:"/fitness",element:Object(I.jsx)(bt,{})}),Object(I.jsx)(u.a,{path:"/settings",element:Object(I.jsx)(mt,{})})]})})}),document.getElementById("root")),s()}},[[57,1,2]]]);
//# sourceMappingURL=main.afa92d36.chunk.js.map