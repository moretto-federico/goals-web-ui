(this["webpackJsonpgoals-web-ui"]=this["webpackJsonpgoals-web-ui"]||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(34),c=n.n(r),s=(n(45),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))}),o=n(21),u=n(6),l=n(10),d=n(12),f=n(11),h=n.n(f),b=n(9),j=n.n(b),v=n(25),g=n(24),p=n(36),O=n(37),m=(n(46),n(23)),y=n(35),k={running:{type:"running",label:"Running",Icon:m.b},trekking:{type:"trekking",label:"Trekking",Icon:m.a},climbing:{type:"climbing",label:"Climbing",Icon:g.a},fitness:{type:"fitness",label:"Fitness",Icon:y.a}};var x={date:{toApiValue:function(e){return h()(e).toISOString()},toCsvValue:j.a.identity,fromCsvValue:j.a.identity},string:{toApiValue:j.a.identity,toCsvValue:function(e){return e.replaceAll(",","%%COMMA%%").replaceAll("\n","%%NEW_LINE%%")},fromCsvValue:function(e){return e.replaceAll("%%COMMA%%",",").replaceAll("%%NEW_LINE%%","\n")}},number:{toApiValue:j.a.toNumber,toCsvValue:j.a.identity,fromCsvValue:j.a.toNumber},duration:{toApiValue:function(e){return h.a.duration(e).as("seconds")},toCsvValue:j.a.identity,fromCsvValue:j.a.toNumber}},w={date:{label:"Date",inputPlaceholder:"YYYY-MM-DD",createInitValue:function(){return h()().format("YYYY-MM-DD")},type:x.date},description:{label:"Description",inputPlaceholder:"describe the place or type of activity",createInitValue:function(){return""},type:x.string},duration:{label:"Duration",inputPlaceholder:"HH:mm:ss",createInitValue:function(){return""},type:x.duration},distance:{label:"Distance",inputPlaceholder:"18000",createInitValue:function(){return""},type:x.number},elevationGain:{label:"Elevation gain",inputPlaceholder:"500",createInitValue:function(){return""},type:x.number},kmPerHour:{label:"Km/h",inputPlaceholder:"Km per hour",createInitValue:function(){return""},type:x.number},minPerKm:{label:"min/Km",inputPlaceholder:"minutes per Km",createInitValue:function(){return""},type:x.number},id:{label:"Identify",inputPlaceholder:"Input an UUID",createInitValue:function(){return""},type:x.string},type:{label:"Session type",inputPlaceholder:j.a.keys(k).join("/"),createInitValue:function(){return""},type:x.string}},S=n(1),I={running:function(e){var t=e.duration,n=e.distance,i=e.kmPerHour,a=e.minPerKm;return[{Icon:v.a,value:h.a.duration(t,"s").format("h:mm:ss")},{Icon:g.b,value:"".concat(j.a.round(n/1e3,1)," Km")},{Icon:p.a,value:"".concat(a," min/Km")},{Icon:O.a,value:"".concat(i," Km/h")}]},fitness:function(e){var t=e.duration;return[{Icon:v.a,value:h.a.duration(t,"s").format("h:mm:ss")}]},climbing:function(e){var t=e.duration;return[{Icon:v.a,value:h.a.duration(t,"s").format("h:mm:ss")}]},trekking:function(e){var t=e.duration,n=e.distance,i=e.elevationGain;return[{Icon:m.a,value:"".concat(i," m")},{Icon:v.a,value:h.a.duration(t,"s").format("h:mm")},{Icon:g.b,value:"".concat(j.a.round(n/1e3,1)," Km")}]}};function N(e){var t=e.label,n=e.description,i=e.type,a=e.distance,r=e.date,c=e.duration,s=e.elevationGain,o=e.kmPerHour,u=e.minPerKm,l=h()(r,"YYYY-MM-DDTHH:mm.Z").format("ll"),d=k[i].Icon,f=I[i]({duration:c,distance:a,elevationGain:s,kmPerHour:o,minPerKm:u});return Object(S.jsxs)("li",{className:"goals-news-item",children:[Object(S.jsxs)("div",{className:"goals-news-item__header",children:[Object(S.jsxs)("div",{className:"goals-news-item__header-type",children:[Object(S.jsx)(d,{}),Object(S.jsx)("p",{className:"goals-news-item__header-label",children:t})]}),Object(S.jsxs)("div",{className:"goals-news-item__header-content",children:[Object(S.jsx)("p",{className:"goals-news-item__header-description",children:n}),Object(S.jsx)("p",{className:"goals-news-item__header-date",children:l})]})]}),Object(S.jsx)("ol",{className:"goals-news-item__content",children:f.map((function(e,t){var n=e.Icon,i=e.value;return Object(S.jsxs)("li",{className:"goals-news-item__content-item",children:[Object(S.jsx)(n,{}),Object(S.jsx)("p",{className:"goals-news-item__header-label",children:i})]},t)}))})]})}var D=n(8),C=n.n(D),E=n(3),_=n(4),A=n(5),P=n(7),V=function(){function e(){Object(E.a)(this,e)}return Object(P.a)(e,[{key:"save",value:function(){}},{key:"dispose",value:function(){}},{key:"create",value:function(e){}},{key:"update",value:function(e){}},{key:"getById",value:function(e){}}]),e}(),R=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return n}(V),Y=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return n}(V),G=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return n}(V),T=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return n}(V),M=function(){function e(){Object(E.a)(this,e)}return Object(P.a)(e,[{key:"getAllByYear",value:function(e){return[]}}]),e}(),H=n(16),K=n(13),B=n(59),U=n(40);function F(){return Object(B.a)()}var J=function(){function e(t){Object(E.a)(this,e),this.type=t}return Object(P.a)(e,[{key:"validate",value:function(e,t){return C.a.replace(t,"{{type}}",this.type)}}]),e}(),L=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.call(this,"id")}return Object(P.a)(n,[{key:"validate",value:function(e,t){if(!function(e){return Object(U.a)(e)}(e))return Object(H.a)(Object(K.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(J),W=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.call(this,"date")}return Object(P.a)(n,[{key:"validate",value:function(e,t){if(!C.a.isString(e)||!/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/.test(e))return Object(H.a)(Object(K.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(J),Z=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.call(this,"number")}return Object(P.a)(n,[{key:"validate",value:function(e,t){if(!C.a.isNumber(e))return Object(H.a)(Object(K.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(J),q=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.call(this,"duration")}return Object(P.a)(n,[{key:"validate",value:function(e,t){if(!C.a.isNumber(e))return Object(H.a)(Object(K.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(J),z=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){return Object(E.a)(this,n),t.call(this,"string")}return Object(P.a)(n,[{key:"validate",value:function(e,t){if(!C.a.isString(e))return Object(H.a)(Object(K.a)(n.prototype),"validate",this).call(this,e,t)}}]),n}(J),Q=[new L,new W,new Z,new q,new z];function X(e){return Q.find((function(t){return t.type===e}))}var $=n(30),ee=function(){function e(t,n){Object(E.a)(this,e),this.code=t,this.payload=n}return Object(P.a)(e,[{key:"isOk",value:function(){return this.code<300&&this.code>=200}}],[{key:"createByError",value:function(t){return t.commandResponse?t.commandResponse:new e(500,t.message||JSON.stringify(t))}},{key:"createOk",value:function(t){return new e(200,t)}}]),e}();ee.UNDEFINED_HANDLER=new ee(500,"undefined command handler"),ee.UNDEFINED_REPOSITORY=new ee(500,"undefined aggregate repository"),ee.OK=new ee(200);var te=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(e,i){var a;return Object(E.a)(this,n),(a=t.call(this,i)).name="CommandResponseError",a.code=e,a.commandResponse=new ee(e,i),a}return n}(Object($.a)(Error)),ne=function(){function e(){Object(E.a)(this,e),this.meta={}}return Object(P.a)(e,[{key:"init",value:function(e,t,n){this.meta[e]={type:X(t),defaultValue:n},this[e]="function"===typeof n?n():n}},{key:"validate",value:function(){var e=this;C.a.forEach(this.meta,(function(t,n){var i=e[n],a=t.type;if(!C.a.isNil(i)){var r=a.validate(i,"".concat(n," is not a {{type}}"));if(r)throw new te(400,r)}}))}}]),e}(),ie=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e}return n}(ne),ae=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e}return n}(ne),re=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e.init("distance","number",0),e}return n}(ne),ce=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("date","date",(function(){return(new Date).toISOString()})),e.init("description","string"),e.init("duration","duration",0),e.init("distance","number",0),e.init("elevationGain","number",0),e}return n}(ne),se=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("year","number"),e}return n}(ne),oe=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e}return n}(ne),ue=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e}return n}(ne),le=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e.init("distance","number"),e}return n}(ne),de=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e.init("date","date"),e.init("description","string"),e.init("duration","duration"),e.init("distance","number"),e.init("elevationGain","number"),e}return n}(ne),fe=function(){function e(){Object(E.a)(this,e),this.map={}}return Object(P.a)(e,[{key:"registerRepository",value:function(e,t){this.map[e]=this.map[e]?Object(l.a)(Object(l.a)({},this.map[e]),{},{instance:t}):{instance:t}}},{key:"create",value:function(e){var t=this.map[e].instance;return t||ee.UNDEFINED_REPOSITORY}}]),e}(),he=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=t.date,a=t.description,r=t.duration;Object(E.a)(this,e),this.id=n||F(),this.setDate(i),this.setDescription(a),this.setDuration(r)}return Object(P.a)(e,[{key:"setDescription",value:function(e){this.description=e}},{key:"setDate",value:function(e){this.date=e}},{key:"setDuration",value:function(e){this.duration=e}}]),e}(),be=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(E.a)(this,n),t.call(this,e)}return n}(he);function je(e){return e/60}function ve(e){return e/3600}function ge(e){return e/1e3}var pe=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(e,i){var a;return Object(E.a)(this,n),(a=t.call(this,"".concat(e," error: ").concat(i))).name="RequestError",a}return n}(Object($.a)(Error)),Oe=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.date,c=i.description,s=i.distance,o=i.duration;return Object(E.a)(this,n),(e=t.call(this,{id:a,date:r,description:c,duration:o})).setRunData({distance:s,duration:o}),e}return Object(P.a)(n,[{key:"speed",value:function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"km/h";return"min/km"===n?je(e)/ge(t):"km/h"===n?ge(t)/ve(e):void 0}(this.duration,this.distance,e);if(t)return t;throw new pe("run session speed","type ".concat(e," undefined"))}},{key:"setRunData",value:function(e){var t=e.distance,n=e.duration;this.distance=t,this.duration=n,this.kmPerHour=C.a.round(this.speed("km/h"),2),this.minPerKm=C.a.round(this.speed("min/km"),2)}}]),n}(he),me=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(E.a)(this,n),t.call(this,e)}return n}(Oe),ye=n(39),ke=["elevationGain"],xe=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.elevationGain,r=Object(ye.a)(i,ke);return Object(E.a)(this,n),(e=t.call(this,r)).setElevationGain(a),e}return Object(P.a)(n,[{key:"setElevationGain",value:function(e){this.elevationGain=e}}]),n}(Oe),we=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(E.a)(this,n),t.call(this,e)}return n}(he),Se=n(15),Ie=(n(48),function(){function e(t,n){Object(E.a)(this,e),this.repository=t,this.readonly=n}return Object(P.a)(e,[{key:"save",value:function(){!this.readonly&&this.repository.save()}},{key:"dispose",value:function(){!this.readonly&&this.repository.dispose()}},{key:"create",value:function(e){!this.readonly&&this.repository.create(e)}},{key:"update",value:function(e){!this.readonly&&this.repository.update(e)}},{key:"delete",value:function(e){!this.readonly&&this.repository.delete(e)}},{key:"getById",value:function(e){this.repository.getById(e)}}]),e}()),Ne=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;Object(E.a)(this,e),this.repository=t,this.hooks=n,this.settings=i}return Object(P.a)(e,[{key:"createContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.correlationId;return{correlationId:t||F(),transaction:new Ie(this.repository,this.settings.readonly)}}},{key:"validate",value:function(e,t){e.validate()}},{key:"beforeExecution",value:function(e,t){}},{key:"apply",value:function(e,t){}},{key:"save",value:function(e,t){t.transaction.save()}},{key:"execute",value:function(e,t){var n=this.createContext(t);try{this.beforeExecution(e,n),this.hooks.beforeExecution&&this.hooks.beforeExecution(e,n),this.validate(e,n),this.hooks.validate&&this.hooks.validate(e,n);var i=this.hooks.apply?this.hooks.apply(e,n):this.apply(e,n);return this.hooks.beforeSave&&this.hooks.beforeSave(e,n),this.save(e,n),ee.createOk(i)}catch(a){return n.transaction.dispose(),ee.createByError(a)}}}]),e}(),De=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{createNew:!1,getId:C.a.property("id"),create:C.a.noop,createRepo:C.a.noop},a=arguments.length>1?arguments[1]:void 0;return Object(E.a)(this,n),(e=t.call(this,i.createRepo(),a)).settings=i,e}return Object(P.a)(n,[{key:"beforeExecution",value:function(e,t){if(Object(H.a)(Object(K.a)(n.prototype),"beforeExecution",this).call(this,e,t),this.settings.createNew)t.aggregate=this.settings.create(e);else{var i=this.settings.getId(e),a=this.repository.getById(i);t.aggregate=this.settings.create(a)}}},{key:"validate",value:function(e,t){if(Object(H.a)(Object(K.a)(n.prototype),"validate",this).call(this,e,t),!t.aggregate)throw new te(404,"entity not found")}},{key:"save",value:function(e,t){this.settings.createNew?t.transaction.create(t.aggregate):this.settings.delete?t.transaction.delete(t.aggregate):t.transaction.update(t.aggregate),Object(H.a)(Object(K.a)(n.prototype),"save",this).call(this,e,t)}},{key:"apply",value:function(e,t){return t.aggregate}}]),n}(Ne),Ce=function(){function e(t){Object(E.a)(this,e),this.commandHandler=t,this.createService=function(e){return new Ne(e.serviceSettings.createRepo(),e.hooks,e.serviceSettings)}}return Object(P.a)(e,[{key:"toCreateAggregate",value:function(){return this.serviceSettings={createNew:!0},this.createService=function(e){return new De(e.serviceSettings,e.hooks)},this}},{key:"toDeleteAggregate",value:function(){return this.serviceSettings={delete:!0,getId:function(e){return e.id}},this.createService=function(e){return new De(e.serviceSettings,e.hooks)},this}},{key:"toUpdateAggregate",value:function(){return this.serviceSettings={createNew:!1,getId:function(e){return e.id}},this.createService=function(e){return new De(e.serviceSettings,e.hooks)},this}},{key:"readonly",value:function(){return this.serviceSettings=Object(l.a)(Object(l.a)({},this.serviceSettings),{},{readonly:!0}),this}},{key:"forCommand",value:function(e){return this.commandHandler.registerCommand(e,this),this}},{key:"entity",value:function(e){return this.serviceSettings=C.a.merge(this.serviceSettings,{create:e}),this}},{key:"identify",value:function(e){return this.serviceSettings=C.a.merge(this.serviceSettings,{getId:e}),this}},{key:"repository",value:function(e){var t=this;return this.serviceSettings=C.a.merge(this.serviceSettings,{createRepo:function(){return t.commandHandler.repositoryMap.create(e)}}),this}},{key:"apply",value:function(e){return this.hooks=C.a.merge(this.hooks,{apply:e}),this}}]),e}(),Ee=function(){function e(t){Object(E.a)(this,e),this.handlers={},this.repositoryMap=t}return Object(P.a)(e,[{key:"registerCommand",value:function(e,t){e.executor=this,this.handlers[e]=this.handlers[e]?Object(l.a)(Object(l.a)({},this.handlers[e]),{},{ServiceClass:t}):{ServiceClass:t}}},{key:"execute",value:function(e){var t=this.handlers[Object.getPrototypeOf(e).constructor].ServiceClass;return t.constructor===Ce?t.createService(t).execute(e):t?new t({repositoryMap:this.repositoryMap}).execute(e):ee.UNDEFINED_HANDLER}},{key:"createService",value:function(){return new Ce(this)}}]),e}(),_e=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ne),Ae=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ne),Pe=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ne),Ve=function(e){Object(_.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).init("id","id"),e}return n}(ne),Re=new fe,Ye=new Ee(Re);function Ge(e){e.createService().toCreateAggregate().forCommand(ae).entity((function(e){return new be(e)})).repository(Y),e.createService().toDeleteAggregate().forCommand(_e).repository(Y),e.createService().toUpdateAggregate().forCommand(ue).entity((function(e){return new be(e)})).repository(Y).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),e.duration&&t.aggregate.setDuration(e.duration),t.aggregate}))}function Te(e){e.createService().toCreateAggregate().forCommand(ce).entity((function(e){return new xe(e)})).repository(T),e.createService().toDeleteAggregate().forCommand(Pe).repository(T),e.createService().toUpdateAggregate().forCommand(de).entity((function(e){return new xe(e)})).repository(T).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),e.elevationGain&&t.aggregate.setElevationGain(e.elevationGain),(e.distance||e.duration)&&t.aggregate.setRunData(C.a.merge({distance:t.aggregate.distance,duration:t.aggregate.duration},{distance:e.distance,duration:e.duration})),t.aggregate}))}function Me(e){e.createService().toCreateAggregate().forCommand(re).entity((function(e){return new me(e)})).repository(G),e.createService().toDeleteAggregate().forCommand(Ae).repository(G),e.createService().toUpdateAggregate().forCommand(le).entity((function(e){return new me(e)})).repository(G).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),(e.distance||e.duration)&&t.aggregate.setRunData(C.a.merge({distance:t.aggregate.distance,duration:t.aggregate.duration},{distance:e.distance,duration:e.duration})),t.aggregate}))}function He(e){e.createService().toCreateAggregate().forCommand(ie).entity((function(e){return new we(e)})).repository(R),e.createService().toDeleteAggregate().forCommand(Ve).repository(R),e.createService().toUpdateAggregate().forCommand(oe).entity((function(e){return new we(e)})).repository(R).apply((function(e,t){return e.date&&t.aggregate.setDate(e.date),e.description&&t.aggregate.setDescription(e.description),e.duration&&t.aggregate.setDuration(e.duration),t.aggregate}))}function Ke(e,t,n){return new Promise((function(i,a){if("POST"===t){if("/api/running/session"===e){var r=new re;return void i(Ye.execute(C.a.merge(r,n)))}if("/api/fitness/session"===e){var c=new ae;return void i(Ye.execute(C.a.merge(c,n)))}if("/api/climbing/session"===e){var s=new ie;return void i(Ye.execute(C.a.merge(s,n)))}if("/api/trekking/session"===e){var o=new ce;return void i(Ye.execute(C.a.merge(o,n)))}}if("PUT"===t){if("/api/running/session"===e){var u=new le;return void i(Ye.execute(C.a.merge(u,n)))}if("/api/fitness/session"===e){var l=new ue;return void i(Ye.execute(C.a.merge(l,n)))}if("/api/climbing/session"===e){var d=new oe;return void i(Ye.execute(C.a.merge(d,n)))}if("/api/trekking/session"===e){var f=new de;return void i(Ye.execute(C.a.merge(f,n)))}}if("GET"===t&&e.startsWith("/api/sessions/year/")){var h=new se;return h.year=C.a.toNumber(e.substring("/api/sessions/year/".length)),void i(Ye.execute(h))}a(new Error("not implemented"))}))}var Be={fitness:Y,running:G,trekking:T,climbing:R,sessions:M},Ue=function(e,t){return Re.registerRepository(e,t)},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;e.createService().readonly().forCommand(se).repository(M).apply((function(e,t){return t.transaction.repository.getAllByYear(e.year)})),Me(e),Te(e),Ge(e),He(e)},Je=function(){return{api:Ke}};n(49);function Le(){var e=Je().api,t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(i.useEffect)((function(){e("/api/sessions/year/"+h()().year(),"GET").then((function(e){return r(e.payload)}))}),[e]),Object(S.jsx)("ol",{className:"goals-news",children:a.map((function(e,t){return Object(S.jsx)(N,Object(l.a)({},e),t)}))})}var We=n(27),Ze=n(38);n(50);function qe(e){var t=e.children,n=Object(i.useState)(!1),a=Object(d.a)(n,2),r=a[0],c=a[1];return Object(S.jsxs)("div",{className:"goals-menu",children:[Object(S.jsx)(We.b,{onClick:function(){return c((function(e){return!e}))}}),r&&Object(S.jsx)("div",{className:"goals-menu__list",children:t})]})}n(51);function ze(e){var t=e.Icon,n=e.text,i=e.url;return Object(S.jsxs)("div",{className:"goals-toolbar-link",children:[Object(S.jsx)(t,{title:n}),Object(S.jsx)(o.b,{to:i,children:n})]})}n(52);function Qe(){return Object(S.jsx)(S.Fragment,{children:j.a.map(k,(function(e,t){return Object(S.jsx)(ze,{Icon:e.Icon,url:"/".concat(t),text:e.label},t)}))})}function Xe(){return Object(S.jsxs)("div",{className:"goals-toolbar",children:[Object(S.jsx)("div",{className:"goals-toolbar__logo",children:Object(S.jsx)(We.a,{})}),Object(S.jsx)("div",{className:"goals-toolbar__links",children:Object(S.jsx)(Qe,{})}),Object(S.jsx)("div",{className:"goals-toolbar__menu",children:Object(S.jsxs)(qe,{children:[Object(S.jsx)("div",{className:"goals-toolbar__menu-links",children:Object(S.jsx)(Qe,{})}),Object(S.jsx)("br",{}),Object(S.jsx)(ze,{Icon:Ze.a,url:"/settings",text:"Settings"})]})})]})}var $e=function(){return Object(S.jsxs)("div",{className:"goals-page goals-page--home",children:[Object(S.jsx)(Xe,{}),Object(S.jsx)(Le,{})]})},et=n(20),tt=n.n(et),nt=n(29),it=n(19);function at(e){var t=e.id,n=e.label,i=e.placeholder,a=e.value,r=e.onChange;return Object(S.jsxs)("div",{className:"form-item",children:[Object(S.jsx)("label",{htmlFor:t,children:n}),Object(S.jsx)("input",{placeholder:i,id:t,value:a,onChange:r})]})}n(54);function rt(e){var t=e.type,n=k[t].Icon;return Object(S.jsxs)("div",{className:"goals-tracking",children:[Object(S.jsx)(n,{}),Object(S.jsx)("button",{children:"Start Tracking"})]})}function ct(e){var t=e.type,n=e.props,a=Object(u.f)(),r=Object(i.useState)(),c=Object(d.a)(r,2),s=c[0],o=c[1],f=Object(i.useState)(j.a.reduce(n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(it.a)({},t,w[t].createInitValue()))}),{})),h=Object(d.a)(f,2),b=h[0],v=h[1],g=Je().api,p=function(){var e=Object(nt.a)(tt.a.mark((function e(i){var r,c;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),r=j.a.reduce(n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(it.a)({},t,w[t].type.toApiValue(b[t])))}),{}),e.next=4,g("/api/"+t+"/session","POST",r);case 4:(c=e.sent).code>=200&&c.code<300?a("/"):o({status:!1,message:c.payload});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=void 0;if(s){var t=setTimeout((function(){return o(void 0)}),5e3);e=function(){return clearTimeout(t)}}return e}),[s]),Object(S.jsxs)("form",{className:"goals-create-new-session",onSubmit:p,children:[n.map((function(e){var t=w[e],n=t.label,i=t.inputPlaceholder;return Object(S.jsx)(at,{id:e,label:n,value:b[e],onChange:function(t){return v((function(n){return Object(l.a)(Object(l.a)({},n),{},Object(it.a)({},e,t.target.value))}))},placeholder:i},e)})),Object(S.jsx)("div",{className:"form-footer",children:Object(S.jsx)("input",{type:"submit",value:"Conferma"})}),s&&s.status&&Object(S.jsx)("div",{children:"Created!"}),s&&!s.status&&Object(S.jsx)("div",{children:s.message})]})}function st(e){var t=e.type,n=e.props;return Object(S.jsxs)("div",{className:"goals-page goals-page--new-session",children:[Object(S.jsx)(rt,{type:t}),Object(S.jsx)(ct,{type:t,props:n})]})}function ot(){return Object(S.jsx)(st,{type:"running",props:["date","description","duration","distance"]})}var ut=function(){function e(t){Object(E.a)(this,e),this.name=t,this.cache=[]}return Object(P.a)(e,[{key:"getData",value:function(){var e=localStorage.getItem(this.name);return e?JSON.parse(e):[]}},{key:"save",value:function(){if(0!==this.cache.length){var e=this.getData(),t=this.cache.map((function(e){return e.id}));e=[].concat(Object(Se.a)(e.filter((function(e){return!t.includes(e.id)}))),Object(Se.a)(this.cache)),localStorage.setItem(this.name,JSON.stringify(e))}}},{key:"dispose",value:function(){this.cache=[]}},{key:"create",value:function(e){this.cache.push(e)}},{key:"update",value:function(e){this.cache.find((function(t){return t.id===e.id}))&&(this.cache=this.cache.filter((function(t){return t.id!==e.id}))),this.cache.push(e)}},{key:"getById",value:function(e){var t=this.cache.find((function(t){return t.id===e}));return t||((t=this.getData().find((function(t){return t.id===e})))&&this.cache.push(t),t)}}]),e}(),lt=function(){function e(){Object(E.a)(this,e),this.names=[]}return Object(P.a)(e,[{key:"registerSession",value:function(e){this.names.push(e)}},{key:"getAllByYear",value:function(e){var t=[];return this.names.forEach((function(n){var i=new ut(n).getData().filter((function(t){return h()(t.date).year()===e})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{type:n})}));t=[].concat(Object(Se.a)(t),Object(Se.a)(i))})),j.a.reverse(j.a.sortBy(t,["date"]))}}]),e}();function dt(){return Object(S.jsx)(st,{type:"trekking",props:["date","description","elevationGain","duration","distance"]})}function ft(){return Object(S.jsx)(st,{type:"climbing",props:["date","description","duration"]})}function ht(){return Object(S.jsx)(st,{type:"fitness",props:["date","description","duration"]})}var bt=n(28),jt=(n(55),["type","date","description","distance","duration","elevationGain","id"]);function vt(){var e=Object(i.useState)({}),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Je().api,c=Object(i.useRef)();return Object(i.useEffect)((function(){n.content&&(c.current.click(),a({}))}),[n.content]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("button",{onClick:function(){r("/api/sessions/year/"+h()().year(),"GET").then((function(e){var t=e.payload;if(0!==t.length){var n="data:text/csv;charset=utf-8,"+(jt.join(",")+"\n")+t.map((function(e){return jt.map((function(t){return w[t].type.toCsvValue(e[t])})).join(",")})).join("\n"),i="goals-sessions- "+h()().format("YYYY-MM-DD")+".csv";a({content:n,fileName:i})}}))},children:"Export Data"}),Object(S.jsx)("a",{ref:c,className:"goals-export-csv",href:n.content,download:n.fileName,children:"Donwload Sessions"})]})}function gt(e){var t=e.split("\n"),n=t.shift().split(",");return t.map((function(e){for(var t={},i=e.split(","),a=0;a<n.length;a++)t[n[a]]=w[n[a]].type.fromCsvValue(i[a]);return t}))}function pt(){var e=Object(i.useState)(!0),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(""),c=Object(d.a)(r,2),s=c[0],o=c[1],u=Object(i.useState)([]),l=Object(d.a)(u,2),f=l[0],h=l[1],b=Je().api,j=function(){var e=Object(nt.a)(tt.a.mark((function e(){var t,i,r,c;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=28;break}t=gt(s),i=Object(bt.a)(t),e.prev=3,i.s();case 5:if((r=i.n()).done){e.next=17;break}return c=r.value,e.prev=7,e.next=10,b("/api/"+c.type+"/session",c.id?"PUT":"POST",c);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),h((function(t){return[].concat(Object(Se.a)(t),[e.t0])}));case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(3),i.e(e.t1);case 22:return e.prev=22,i.f(),e.finish(22);case 25:a(!0),e.next=30;break;case 28:a(!1),h([]);case 30:case"end":return e.stop()}}),e,null,[[3,19,22,25],[7,12]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"goals-settings__import",children:[Object(S.jsxs)("div",{className:"goals-settings__import-header",children:[Object(S.jsx)("button",{onClick:j,children:n?"Import Data":"Confirm Import"}),!n&&Object(S.jsx)("button",{onClick:function(){a(!0),h([])},children:"Cancel Import"})]}),!n&&Object(S.jsx)("textarea",{value:s,onChange:function(e){return o(e.target.value)},placeholder:"write CSV data here"}),f.length>0&&Object(S.jsx)("div",{className:"goals-settings__import-erros",children:f.map((function(e,t){return Object(S.jsx)("p",{children:JSON.stringify(e)},t)}))})]})}var Ot=function(){return Object(S.jsxs)("div",{className:"goals-page goals-page--settings",children:[Object(S.jsx)(pt,{}),Object(S.jsx)(vt,{})]})},mt=n(11);n(56)(mt),function(){Fe();var e=new lt;j.a.forEach(Be,(function(t,n){"sessions"===n?Ue(t,e):(e.registerSession(n),Ue(t,new ut(n)))}))}(),c.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(o.a,{children:Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{index:!0,path:"/",element:Object(S.jsx)($e,{})}),Object(S.jsx)(u.a,{path:"/running",element:Object(S.jsx)(ot,{})}),Object(S.jsx)(u.a,{path:"/trekking",element:Object(S.jsx)(dt,{})}),Object(S.jsx)(u.a,{path:"/climbing",element:Object(S.jsx)(ft,{})}),Object(S.jsx)(u.a,{path:"/fitness",element:Object(S.jsx)(ht,{})}),Object(S.jsx)(u.a,{path:"/settings",element:Object(S.jsx)(Ot,{})})]})})}),document.getElementById("root")),s()}},[[57,1,2]]]);
//# sourceMappingURL=main.208d97cb.chunk.js.map